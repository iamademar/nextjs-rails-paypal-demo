(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{433:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(2115),l=a(9929);function n(){let e=(0,l.A)(),[t,a]=(0,r.useState)([]),[n,c]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),p=e=>{e&&(window.location.href="".concat("http://localhost:3001/api","/receipts/").concat(e,"/download"))};return((0,r.useEffect)(()=>{d||(async()=>{try{c(!0);let t=await e.request("/payments");a(t),h(!0)}catch(e){console.error("Error fetching payments:",e),o("Failed to load payment history")}finally{c(!1)}})()},[e,d]),n)?(0,s.jsx)("div",{className:"p-4",children:"Loading payment history..."}):i?(0,s.jsx)("div",{className:"p-4 text-red-600",children:i}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Billing & Payment History"}),0===t.length?(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,s.jsx)("p",{children:"No payment history available."})}):(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left text-gray-700",children:[(0,s.jsx)("th",{className:"px-4 py-2",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Description"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Receipt"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"px-4 py-2",children:new Date(e.payment_date).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.subscription.description}),(0,s.jsxs)("td",{className:"px-4 py-2",children:["$",e.amount]}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("COMPLETED"===e.status?"bg-green-100 text-green-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.receipt_id?(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsx)("button",{onClick:()=>p(e.receipt_id),className:"text-green-600 hover:underline",children:"Download"})}):(0,s.jsx)("span",{className:"text-gray-500",children:"Processing..."})})]},e.id))})]})})]})}},7249:(e,t,a)=>{Promise.resolve().then(a.bind(a,433))},9929:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(2115);let r=function(){let[e,t]=(0,s.useState)({data:null,loading:!1,error:null}),a=(0,s.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:s="GET",body:r,headers:l={}}=a;t(e=>({...e,loading:!0,error:null}));try{let a=await fetch("".concat("http://localhost:3001/api").concat(e),{method:s,headers:{"Content-Type":"application/json",Accept:"application/json",...l},body:r?JSON.stringify(r):void 0});if(!a.ok){let e="Request failed with status ".concat(a.status);try{e=(await a.json()).error||e}catch(e){}throw Error(e)}let n=await a.json();return t({data:n,loading:!1,error:null}),n}catch(e){throw t({data:null,loading:!1,error:e instanceof Error?e.message:"Unknown error"}),e}},[]);return{...e,request:a}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,587,358],()=>t(7249)),_N_E=e.O()}]);