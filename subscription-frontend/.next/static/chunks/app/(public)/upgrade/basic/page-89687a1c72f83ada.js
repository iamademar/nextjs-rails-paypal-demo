(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{1686:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5155),n=r(2115),a=r(9929),l=r(6658);function i(e){let{planId:t,description:r,amount:i}=e,c=(0,n.useRef)(null),[o,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),m=(0,a.A)(),p=(0,l.useRouter)();return(0,n.useEffect)(()=>{if(window.paypal)d(!0);else{let e=document.createElement("script"),t="AXoJORT4xmk2dH2tIDWI-gWJffclySiuBJjkG_I6COgUvVfWZVRM_VEshOvnrxO9okjwBPkFxxv8-gps";if(!t){h("PayPal client ID is not configured");return}return e.src="https://www.paypal.com/sdk/js?client-id=".concat(t,"&vault=true&intent=subscription"),e.async=!0,e.onload=()=>d(!0),e.onerror=()=>h("Failed to load PayPal SDK"),document.body.appendChild(e),()=>{document.body.removeChild(e)}}},[]),(0,n.useEffect)(()=>{o&&c.current&&window.paypal&&(c.current.innerHTML="",window.paypal.Buttons({style:{layout:"vertical",color:"blue",shape:"rect",label:"subscribe"},createSubscription:(e,r)=>r.subscription.create({plan_id:t}),onApprove:async e=>{try{let s=e.subscriptionID;await m.request("/company_subscription",{method:"POST",body:{subscription:{paypal_subscription_id:s,plan_id:t,description:r,payment_date:new Date().toISOString(),status:"ACTIVE",quantity:1,amount:i}}}),p.push("/billing")}catch(e){h("Failed to process subscription. Please try again."),console.error("Subscription processing error:",e)}},onError:e=>{h("An error occurred with PayPal. Please try again."),console.error("PayPal error:",e)}}).render(c.current))},[o,t,r,i,m,p]),(0,s.jsxs)("div",{className:"w-full",children:[u&&(0,s.jsx)("div",{className:"p-3 mb-4 text-red-700 bg-red-100 border border-red-300 rounded",children:u}),(0,s.jsx)("div",{ref:c,className:"w-full",children:!o&&(0,s.jsx)("div",{className:"p-3 text-center border rounded",children:"Loading PayPal..."})})]})}},4373:(e,t,r)=>{Promise.resolve().then(r.bind(r,6675))},6675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),n=r(1686),a=r(8173),l=r.n(a),i=r(2115);function c(){let e="P-7JK64219WU510315MM67D25I";return((0,i.useEffect)(()=>{console.log("PayPal Plan ID:",e)},[e]),e)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"p-8 max-w-md w-full shadow-lg rounded-lg border",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Upgrade to Basic Plan"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-md",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Basic Plan"}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Access to core features with limited usage."}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"$139 / month"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"What's included:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:[(0,s.jsx)("li",{children:"Basic feature access"}),(0,s.jsx)("li",{children:"Up to 100 users"}),(0,s.jsx)("li",{children:"Email support"}),(0,s.jsx)("li",{children:"1 GB storage"})]})]})]}),(0,s.jsx)(n.A,{planId:e,description:"Basic Plan Subscription",amount:139}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(l(),{href:"/",className:"text-blue-600 hover:underline",children:"Cancel and return to home"})})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"p-8 max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Configuration Error"}),(0,s.jsx)("p",{className:"mb-4",children:"The Basic Plan ID is not configured. Please check your environment variables."}),(0,s.jsx)(l(),{href:"/",className:"block w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md text-center",children:"Return to Home"})]})})}},9929:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(2115);let n=function(){let[e,t]=(0,s.useState)({data:null,loading:!1,error:null}),r=(0,s.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:s="GET",body:n,headers:a={}}=r;t(e=>({...e,loading:!0,error:null}));try{let r=await fetch("".concat("http://localhost:3001/api").concat(e),{method:s,headers:{"Content-Type":"application/json",Accept:"application/json",...a},body:n?JSON.stringify(n):void 0});if(!r.ok){let e="Request failed with status ".concat(r.status);try{e=(await r.json()).error||e}catch(e){}throw Error(e)}let l=await r.json();return t({data:l,loading:!1,error:null}),l}catch(e){throw t({data:null,loading:!1,error:e instanceof Error?e.message:"Unknown error"}),e}},[]);return{...e,request:r}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,587,358],()=>t(4373)),_N_E=e.O()}]);