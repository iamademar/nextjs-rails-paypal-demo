(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{1686:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(5155),n=t(2115),i=t(9929),l=t(6658);function a(e){let{planId:r,description:t,amount:a}=e,o=(0,n.useRef)(null),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),h=(0,i.A)(),p=(0,l.useRouter)();return(0,n.useEffect)(()=>{if(window.paypal)d(!0);else{let e=document.createElement("script"),r="AXoJORT4xmk2dH2tIDWI-gWJffclySiuBJjkG_I6COgUvVfWZVRM_VEshOvnrxO9okjwBPkFxxv8-gps";if(!r){m("PayPal client ID is not configured");return}return e.src="https://www.paypal.com/sdk/js?client-id=".concat(r,"&vault=true&intent=subscription"),e.async=!0,e.onload=()=>d(!0),e.onerror=()=>m("Failed to load PayPal SDK"),document.body.appendChild(e),()=>{document.body.removeChild(e)}}},[]),(0,n.useEffect)(()=>{c&&o.current&&window.paypal&&(o.current.innerHTML="",window.paypal.Buttons({style:{layout:"vertical",color:"blue",shape:"rect",label:"subscribe"},createSubscription:(e,t)=>t.subscription.create({plan_id:r}),onApprove:async e=>{try{let s=e.subscriptionID;await h.request("/company_subscription",{method:"POST",body:{subscription:{paypal_subscription_id:s,plan_id:r,description:t,payment_date:new Date().toISOString(),status:"ACTIVE",quantity:1,amount:a}}}),p.push("/billing")}catch(e){m("Failed to process subscription. Please try again."),console.error("Subscription processing error:",e)}},onError:e=>{m("An error occurred with PayPal. Please try again."),console.error("PayPal error:",e)}}).render(o.current))},[c,r,t,a,h,p]),(0,s.jsxs)("div",{className:"w-full",children:[u&&(0,s.jsx)("div",{className:"p-3 mb-4 text-red-700 bg-red-100 border border-red-300 rounded",children:u}),(0,s.jsx)("div",{ref:o,className:"w-full",children:!c&&(0,s.jsx)("div",{className:"p-3 text-center border rounded",children:"Loading PayPal..."})})]})}},8016:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(5155),n=t(1686),i=t(8173),l=t.n(i);function a(){let e="P-3E071329KS836481JM67D4LI";return e?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"p-8 max-w-md w-full shadow-lg rounded-lg border",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Upgrade to Premium Plan"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"mb-4 p-4 bg-indigo-50 rounded-md",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Premium Plan"}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Unlimited access to all features and priority support."}),(0,s.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:"$199 / month"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"What's included:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:[(0,s.jsx)("li",{children:"All Basic features plus:"}),(0,s.jsx)("li",{children:"Unlimited users"}),(0,s.jsx)("li",{children:"Priority support"}),(0,s.jsx)("li",{children:"10 GB storage"}),(0,s.jsx)("li",{children:"Advanced analytics"}),(0,s.jsx)("li",{children:"Custom integrations"})]})]})]}),(0,s.jsx)(n.A,{planId:e,description:"Premium Plan Subscription",amount:199}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(l(),{href:"/",className:"text-indigo-600 hover:underline",children:"Cancel and return to home"})})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"p-8 max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Configuration Error"}),(0,s.jsx)("p",{className:"mb-4",children:"The Premium Plan ID is not configured. Please check your environment variables."}),(0,s.jsx)(l(),{href:"/",className:"block w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-md text-center",children:"Return to Home"})]})})}},8372:(e,r,t)=>{Promise.resolve().then(t.bind(t,8016))},9929:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(2115);let n=function(){let[e,r]=(0,s.useState)({data:null,loading:!1,error:null}),t=(0,s.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:s="GET",body:n,headers:i={}}=t;r(e=>({...e,loading:!0,error:null}));try{let t=await fetch("".concat("http://localhost:3001/api").concat(e),{method:s,headers:{"Content-Type":"application/json",Accept:"application/json",...i},body:n?JSON.stringify(n):void 0});if(!t.ok){let e="Request failed with status ".concat(t.status);try{e=(await t.json()).error||e}catch(e){}throw Error(e)}let l=await t.json();return r({data:l,loading:!1,error:null}),l}catch(e){throw r({data:null,loading:!1,error:e instanceof Error?e.message:"Unknown error"}),e}},[]);return{...e,request:t}}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,587,358],()=>r(8372)),_N_E=e.O()}]);